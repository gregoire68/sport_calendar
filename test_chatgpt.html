<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calendrier Sportif 2025 - Timeline avec Filtres</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.8/index.global.min.css" rel="stylesheet" />
  <style>
    body {overflow: hidden; font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:20px; }
    .container { display: flex; gap: 20px; max-width: 1600px; margin: auto; }
    .left-panel { flex: 3; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .right-panel { flex: 1; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-height: 800px; overflow-y: auto; }
    h1 { font-size: 22px; margin-bottom: 10px; }
    #filters { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 10px; }
    .dropdown { position: relative; display: inline-block; }
    .dropdown button { background: #3498db; color: white; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; }
    .dropdown-content { display: none; position: absolute; background: white; border: 1px solid #ddd; border-radius: 5px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); padding: 10px; z-index: 10; max-height: 300px; overflow-y: auto; }
    .dropdown-content label { display: flex; align-items: center; gap: 5px; margin-bottom: 5px; cursor: pointer; }
    .color-box { width: 14px; height: 14px; border-radius: 3px; display: inline-block; }
    #legend { margin-top: 10px; font-size: 14px; }
    #legend span { display: inline-flex; align-items: center; margin-right: 10px; }
    #calendar { max-width: 100%; max-height: 70%; margin-top: 5px; }
    .fc-event-title { white-space: normal !important; }
    .tooltip {
      position: absolute;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 8px;
      border-radius: 5px;
      font-size: 13px;
      max-width: 250px;
      z-index: 9999;
      display: none;
    }
    .recap-event { padding: 8px; border-bottom: 1px solid #ddd; font-size: 14px; }
    .recap-event span { display: block; }
    .recap-date { font-weight: bold; }
    .recap-sport { color: #888; }
  </style>
</head>
<body>
  <div class="container">
    <div class="left-panel">
      <h1>Calendrier Sportif 2025 </h1>
      <div id="filters">
        <div class="dropdown">
          <button id="sportsBtn">Sélectionner les sports</button>
          <div id="sportsMenu" class="dropdown-content"></div>
        </div>
        <div class="dropdown">
          <button id="countriesBtn">Filtrer par continent/pays</button>
          <div id="countriesMenu" class="dropdown-content"></div>
        </div>
      </div>
      <div id="legend"></div>
      <div id="calendar"></div>
    </div>

    <div class="right-panel">
      <h2>Récapitulatif</h2>
      <div id="recapList"></div>
    </div>
  </div>

  <div id="tooltip" class="tooltip"></div>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.8/index.global.min.js"></script>
  <script>
    const SPORT_COLOR = {
      football: '#2ecc71',
      athletics: '#f39c12',
      handball: '#9b59b6',
      basketball: '#3498db',
      tennis: '#e74c3c',
      cycling: '#1abc9c',
      football_americain: '#e67e22',
      rugby: '#c0392b'
    };

        const ALL_EVENTS = [

    // Football - Ligue 1
    { title: 'Ligue 1 - PSG vs Marseille', start: '2025-01-05', sport: 'football', continent: "Europe", country: 'France', details: 'Classique du football français' },
    { title: 'Ligue 1 - OL vs AS Monaco', start: '2025-01-08', sport: 'football', continent: "Europe", country: 'France', details: 'Championnat national' },
    { title: 'Ligue 1 - PSG vs Lyon', start: '2025-01-10', sport: 'football', continent: "Europe", country: 'France', details: 'Championnat national' },
    { title: 'Premier League - Arsenal vs Chelsea', start: '2025-01-15', sport: 'football', continent: "Europe", country: 'Royaume-Uni', details: 'Championnat national' },
    { title: 'Champions League - 8e de finale', start: '2025-02-12', sport: 'football', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },
    { title: 'Ligue des Champions - 8e de finale aller : PSG vs Manchester City', start: '2025-02-18', sport: 'football', continent: 'Europe', country: 'France', details: 'Compétition internationale' },
    { title: 'Ligue des Champions - 8e de finale retour : Manchester City vs PSG', start: '2025-03-12', sport: 'football', continent: 'Europe', country: 'Royaume-Uni', details: 'Compétition internationale' },
    { title: 'Ligue Europa - 16e de finale aller : OM vs Bayer Leverkusen', start: '2025-02-20', sport: 'football', continent: 'Europe', country: 'France', details: 'Compétition internationale' },
    { title: 'Ligue Europa - 16e de finale retour : Bayer Leverkusen vs OM', start: '2025-02-27', sport: 'football', continent: 'Europe', country: 'Allemagne', details: 'Compétition internationale' },
    { title: 'Ligue Europa Conférence - 8e de finale aller : Stade Rennais vs FC Bâle', start: '2025-03-06', sport: 'football', continent: 'Europe', country: 'France', details: 'Compétition internationale' },
    { title: 'Ligue Europa Conférence - 8e de finale retour : FC Bâle vs Stade Rennais', start: '2025-03-13', sport: 'football', continent: 'Europe', country: 'Suisse', details: 'Compétition internationale' },
    { title: 'Ligue 1 - OM vs AS Monaco', start: '2025-02-02', sport: 'football', continent: 'Europe', country: 'France', details: 'Championnat national' },
    { title: 'Ligue 1 - RC Lens vs Lille OSC', start: '2025-02-16', sport: 'football', continent: 'Europe', country: 'France', details: 'Derby du Nord - Championnat national' },
    { title: 'Coupe de France - Quart de finale', start: '2025-03-05', sport: 'football', continent: 'Europe', country: 'France', details: 'Coupe nationale' },
    { title: 'Ligue 1 - Stade Rennais vs Toulouse FC', start: '2025-03-22', sport: 'football', continent: 'Europe', country: 'France', details: 'Championnat national' },
    { title: 'Ligue 1 - PSG vs OM', start: '2025-04-13', sport: 'football', continent: 'Europe', country: 'France', details: 'Classique du football français' },
    { title: 'Coupe de France - Finale', start: '2025-05-03', sport: 'football', continent: 'Europe', country: 'France', details: 'Coupe nationale - Stade de France' },
    { title: 'Ligue 1 - OL vs PSG', start: '2025-05-17', sport: 'football', continent: 'Europe', country: 'France', details: 'Championnat national - Avant dernière journée' },
    { title: 'Trophée des Champions', start: '2025-08-02', sport: 'football', continent: 'Europe', country: 'France', details: 'Match d ouverture de la saison' },
    { title: 'Finale de la Ligue des Nations de Football', start: '2025-06-01', sport: 'football', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },

  // Football international
    { title: 'Euro 2024 - Phase de groupes', start: '2025-06-10', end: '2025-06-30', sport: 'football', continent: 'Europe', country: 'Europe', details: 'Championnat d Europe des nations' },
    { title: 'Coupe du Monde Féminine - Phase de groupes', start: '2025-07-10', end: '2025-08-01', sport: 'football', continent: 'Océanie', country: 'Australie/Nouvelle-Zélande', details: 'Compétition internationale féminine' },
    { title: 'Finale de la Ligue des Champions de Football', start: '2025-06-07', sport: 'football', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },
    { title: 'Finale de la Ligue Europa', start: '2025-05-21', sport: 'football', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },
    { title: 'Finale de la Ligue Europa Conférence', start: '2025-05-28', sport: 'football', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },

  // Handball
    { title: 'Ligue des Champions Handball - Phase de groupes', start: '2025-01-15', end: '2025-04-15', sport: 'handball', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },
    { title: 'Championnat du Monde Handball - Phase de groupes', start: '2025-01-10', end: '2025-01-30', sport: 'handball', continent: 'Europe', country: 'Pologne/Suède', details: 'Compétition internationale' },
    { title: 'Bundesliga Handball - Kiel vs Flensburg', start: '2025-02-20', sport: 'handball', continent: 'Europe', country: 'Allemagne', details: 'Championnat national' },
    { title: 'EHF Champions League - Quart de finale', start: '2025-03-15', sport: 'handball', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },
    { title: 'Finale de la Ligue des Champions de Handball', start: '2025-06-07', sport: 'handball', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },
    { title: 'Finale de la Coupe du Monde de Handball', start: '2025-02-02', sport: 'handball', continent: 'Europe', country: 'Pologne/Suède', details: 'Compétition internationale' },
    { title: 'Tournoi de Qualification Olympique de Handball', start: '2025-04-01', end: '2025-04-15', sport: 'handball', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },

  // Basket
    { title: 'EuroLeague - Phase de groupes', start: '2025-01-05', end: '2025-04-30', sport: 'basketball', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },
    { title: 'NBA - Saison régulière', start: '2025-10-15', end: '2026-04-15', sport: 'basketball', continent: 'Amérique', country: 'USA/Canada', details: 'Championnat professionnel' },
    { title: 'NBA All-Star Game', start: '2025-02-16', sport: 'basketball', continent: 'Amérique', country: 'USA', details: 'Match des étoiles' },
    { title: 'Finale de la Ligue des Champions de Basket', start: '2025-06-14', sport: 'basketball', continent: 'Europe', country: 'Europe', details: 'Compétition internationale' },

      // Tennis
    { title: 'Open d Australie', start: '2025-01-20', end: '2025-02-02', sport: 'tennis', continent: 'Océanie', country: 'Australie', details: 'Grand Chelem' },
    { title: 'Roland-Garros', start: '2025-05-25', end: '2025-06-08', sport: 'tennis', continent: 'Europe', country: 'France', details: 'Grand Chelem sur terre battue' },
    { title: 'Wimbledon', start: '2025-06-30', end: '2025-07-13', sport: 'tennis', continent: 'Europe', country: 'Royaume-Uni', details: 'Grand Chelem sur gazon' },
    { title: 'US Open', start: '2025-08-25', end: '2025-09-07', sport: 'tennis', continent: 'Amérique', country: 'USA', details: 'Grand Chelem sur dur' },
    { title: 'Masters 1000 - Indian Wells', start: '2025-03-10', end: '2025-03-23', sport: 'tennis', continent: 'Amérique', country: 'USA', details: 'Compétition sur dur' },
    { title: 'Masters 1000 - Miami', start: '2025-03-24', end: '2025-04-06', sport: 'tennis', continent: 'Amérique', country: 'USA', details: 'Compétition sur dur' },
    { title: 'Masters 1000 - Madrid', start: '2025-05-05', end: '2025-05-18', sport: 'tennis', continent: 'Europe', country: 'Espagne', details: 'Compétition sur terre battue' },
    { title: 'Masters 1000 - Rome', start: '2025-05-19', end: '2025-05-25', sport: 'tennis', continent: 'Europe', country: 'Italie', details: 'Compétition sur terre battue' },
    { title: 'ATP 500 - Barcelone Open Banc Sabadell', start: '2025-04-21', end: '2025-04-27', sport: 'tennis', continent: 'Europe', country: 'Espagne', details: 'Compétition sur terre battue' },
    { title: 'WTA 500 - Stuttgart Open', start: '2025-04-22', end: '2025-04-28', sport: 'tennis', continent: 'Europe', country: 'Allemagne', details: 'Compétition sur terre battue' },
    { title: 'ATP 250 - Open Sud de France', start: '2025-02-03', end: '2025-02-09', sport: 'tennis', continent: 'Europe', country: 'France', details: 'Compétition sur dur'},
    { title: 'Finale de la Coupe Davis', start: '2025-11-20', end: '2025-11-30', sport: 'tennis',continent: 'Europe', country: 'France', details: 'Compétition internationale par équipes' },
    { title: 'Finale de la Fed Cup', start: '2025-11-01', sport: 'tennis',continent: 'Europe', country: 'Europe', details: 'Compétition internationale féminine par équipes' },
    { title: 'ATP Finals', start: '2025-11-10', end: '2025-11-16', sport: 'tennis',continent: 'Europe', country: 'Europe', details: 'Compétition de fin d année' },
    { title: 'WTA Finals', start: '2025-11-17', end: '2025-11-23', sport: 'tennis',continent: 'Europe', country: 'Europe', details: 'Compétition de fin d année' },

      // Sports mécaniques
      { title: 'Formule 1 - Grand Prix de Monaco', start: '2025-05-25', sport: 'formula1',continent: 'Europe', country: 'Monaco', details: 'Course automobile' },
      { title: 'Formule 1 - Grand Prix de France', start: '2025-06-29', sport: 'formula1',continent: 'Europe', country: 'France', details: 'Course automobile' },
      { title: '24 Heures du Mans', start: '2025-06-14', end: '2025-06-15', sport: 'endurance',continent: 'Europe', country: 'France', details: 'Course d endurance' },
      { title: 'MotoGP - Grand Prix de France', start: '2025-05-18', sport: 'motogp',continent: 'Europe', country: 'France', details: 'Course de motos' },
      
      // Cyclisme
      { title: 'Paris-Roubaix', start: '2025-04-13', sport: 'cycling', continent: 'Europe', country: 'France', details: 'Course cycliste classique' },
      { title: 'Giro d Italia', start: '2025-05-10', end: '2025-06-01', sport: 'cycling', continent: 'Europe', country: 'Italie', details: 'Grand Tour' },
      { title: 'Vuelta a España', start: '2025-08-23', end: '2025-09-14', sport: 'cycling', continent: 'Europe', country: 'Espagne', details: 'Grand Tour' },
      { title: 'Tour de France', start: '2025-07-05', end: '2025-07-27', sport: 'cycling', continent: 'Europe', country: 'France', details: 'Grand Tour' },

      // Athlétisme
      { title: 'Championnats du Monde d Athlétisme - Paris', start: '2025-08-15', end: '2025-08-31', sport: 'athletics', continent: 'Europe', country: 'France', details: 'Compétition internationale' },
      { title: 'Meeting de Monaco - Diamond League', start: '2025-07-10', sport: 'athletics', continent: 'Europe', country: 'Monaco', details: 'Compétition internationale' },
      { title: 'Diamond League - Paris', start: '2025-06-28', sport: 'athletics', continent: 'Europe', country: 'France', details: 'Meeting international' },
      { title: 'Championnats d Europe d Athlétisme - Rome', start: '2025-06-07', end: '2025-06-15', sport: 'athletics', continent: 'Europe', country: 'Italie', details: 'Compétition internationale' },

      // Football americian
      { title: 'Super Bowl', start: '2025-02-02', sport: 'football USA',continent: 'Amérique', country: 'USA', details: 'Finale du championnat de football américain' },
      { title: 'NFL Draft', start: '2025-04-24', end: '2025-04-26', sport: 'football USA', continent: 'Amérique',country: 'USA', details: 'Sélection des nouveaux joueurs' },
      { title: 'NFL Preseason', start: '2025-08-01', end: '2025-08-31', sport: 'football USA', continent: 'Amérique',country: 'USA', details: 'Préparation de la saison' },
      { title: 'NFL Regular Season', start: '2025-09-04', end: '2026-01-04', sport: 'football USA',continent: 'Amérique', country: 'USA', details: 'Saison régulière' },
      
      // Rugby
      { title: 'Tournoi des Six Nations', start: '2025-02-01', end: '2025-03-16', sport: 'rugby',  continent: 'Europe',country: 'Europe', details: 'Compétition internationale' },
      { title: 'Coupe du Monde de Rugby - Phase de groupes', start: '2025-09-08', end: '2025-10-20', sport: 'rugby',  continent: 'Europe',country: 'France', details: 'Compétition internationale' },
      { title: 'Coupe du Monde de Rugby - Quarts de finale', start: '2025-10-21', end: '2025-10-24', sport: 'rugby',  continent: 'Europe',country: 'France', details: 'Compétition internationale' },
      { title: 'Finale de la Coupe du Monde de Rugby', start: '2025-10-26', sport: 'rugby', continent: 'Europe', country: 'France', details: 'Compétition internationale' }
      
    ];



    function mapEvents(events) {
      return events.map(e => ({
        title: e.title.replace(/(.{15})/g, '$1\n'),
        start: e.start,
        end: e.end || e.start,
        backgroundColor: SPORT_COLOR[e.sport],
        borderColor: SPORT_COLOR[e.sport],
        extendedProps: {
          sport: e.sport,
          continent: e.continent,
          country: e.country,
          details: e.details
        }
      }));
    }

    const calendarEl = document.getElementById('calendar');
    const tooltip = document.getElementById('tooltip');
    const recapList = document.getElementById('recapList');

    function getMonday(d) {
      const date = new Date(d);
      const day = date.getDay();
      const diff = date.getDate() - day + (day === 0 ? -6 : 1);
      const monday = new Date(date.setDate(diff));
      return monday.toISOString().split('T')[0]; 
    }

    const calendar = new FullCalendar.Calendar(calendarEl, {
      schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',
      initialView: 'dayGridMonth',
      initialDate: getMonday(new Date()),
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timelineWeek,timelineDay'
      },
      views: {
        dayGridMonth: { type: 'dayGrid', buttonText: 'Mois' },
        timelineWeek: { type: 'timeline', duration: { days: 7 }, buttonText: 'Semaine' },
        timelineDay: { type: 'timeline', duration: { days: 1 }, buttonText: 'Jour' }
      },
      firstDay: 1,
      slotDuration: { days: 1 },
      slotLabelFormat: [{ weekday: 'short', day: '2-digit', month: '2-digit' }],
      events: mapEvents(ALL_EVENTS),
      height: 600,
      eventMouseEnter(info) {
        tooltip.innerHTML = `<b>${info.event.title}</b><br>
                             Sport: ${info.event.extendedProps.sport}<br>
                             Continent: ${info.event.extendedProps.continent}<br>
                             Pays: ${info.event.extendedProps.country}<br>
                             Détails: ${info.event.extendedProps.details}`;
        tooltip.style.display = 'block';
        tooltip.style.left = info.jsEvent.pageX + 10 + 'px';
        tooltip.style.top = info.jsEvent.pageY + 10 + 'px';
      },
      eventMouseLeave() {
        tooltip.style.display = 'none';
      }
    });
    calendar.render();

    // === Génération du menu Sports ===
    const sportsMenu = document.getElementById('sportsMenu');
    Object.keys(SPORT_COLOR).sort().forEach(sport => {
      const label = document.createElement('label');
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.dataset.sport = sport;
      checkbox.addEventListener('change', filterEvents);
      const colorBox = document.createElement('span');
      colorBox.className = 'color-box';
      colorBox.style.background = SPORT_COLOR[sport];
      label.appendChild(colorBox);
      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(' ' + sport.charAt(0).toUpperCase() + sport.slice(1)));
      sportsMenu.appendChild(label);
    });

    // === Génération du menu Continent → Pays ===
    const continents = {};
    ALL_EVENTS.forEach(e => {
      if (!continents[e.continent]) continents[e.continent] = new Set();
      continents[e.continent].add(e.country);
    });

    const countriesMenu = document.getElementById('countriesMenu');
    Object.keys(continents).sort().forEach(continent => {
      const divContinent = document.createElement('div');
      divContinent.style.marginBottom = "8px";

      // Checkbox continent
      const labelCont = document.createElement('label');
      const cbCont = document.createElement('input');
      cbCont.type = 'checkbox';
      cbCont.dataset.continent = continent;
      cbCont.addEventListener('change', (e) => {
        const checks = divContinent.querySelectorAll('input[data-country]');
        checks.forEach(c => c.checked = e.target.checked);
        filterEvents();
      });
      labelCont.appendChild(cbCont);
      labelCont.appendChild(document.createTextNode(" 🌍 " + continent));
      divContinent.appendChild(labelCont);

      // Sous-menu pays
      const subDiv = document.createElement('div');
      subDiv.style.marginLeft = "15px";
      Array.from(continents[continent]).sort().forEach(country => {
        const label = document.createElement('label');
        const cb = document.createElement('input');
        cb.type = 'checkbox';
        cb.dataset.country = country;
        cb.addEventListener('change', filterEvents);
        label.appendChild(cb);
        label.appendChild(document.createTextNode(" " + country));
        subDiv.appendChild(label);
      });
      divContinent.appendChild(subDiv);

      countriesMenu.appendChild(divContinent);
    });

    // === Filtrage ===
    function filterEvents() {
      const checkedSports = Array.from(sportsMenu.querySelectorAll('input[type=checkbox]'))
        .filter(cb => cb.checked && cb.dataset.sport)
        .map(cb => cb.dataset.sport);

      const checkedCountries = Array.from(countriesMenu.querySelectorAll('input[data-country]'))
        .filter(cb => cb.checked)
        .map(cb => cb.dataset.country);

      const checkedContinents = Array.from(countriesMenu.querySelectorAll('input[data-continent]'))
        .filter(cb => cb.checked)
        .map(cb => cb.dataset.continent);

      const filtered = ALL_EVENTS.filter(e =>
        (checkedSports.length === 0 || checkedSports.includes(e.sport)) &&
        (checkedCountries.length === 0 || checkedCountries.includes(e.country)) &&
        (checkedContinents.length === 0 || checkedContinents.includes(e.continent))
      );

      calendar.removeAllEvents();
      calendar.addEventSource(mapEvents(filtered));
      updateLegend(checkedSports);
      updateRecap(filtered);
    }

    function updateLegend(checkedSports) {
      const legend = document.getElementById('legend');
      legend.innerHTML = '';
      checkedSports.forEach(sport => {
        const span = document.createElement('span');
        span.innerHTML = `<span class="color-box" style="background:${SPORT_COLOR[sport]}"></span> ${sport}`;
        legend.appendChild(span);
      });
    }

    function updateRecap(events) {
      recapList.innerHTML = '';
      events.sort((a, b) => new Date(a.start) - new Date(b.start))
        .forEach(e => {
          const div = document.createElement('div');
          div.className = 'recap-event';
          div.innerHTML = `
            <span class="recap-date">${e.start}</span>
            <span class="recap-sport" style="background:${SPORT_COLOR[e.sport] || '#ccc'}; color:white; padding:2px 6px; border-radius:4px; display:inline-block;">
              ${e.sport}
            </span>
            <span class="recap-title">${e.title}</span>
            <span class="recap-lieu">${e.continent} - ${e.country}</span>`;
          recapList.appendChild(div);
        });
    }

    // === Gestion ouverture menu ===
    document.querySelectorAll('.dropdown button').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const menu = e.target.nextElementSibling;
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
      });
    });

    window.addEventListener('click', function(e) {
      document.querySelectorAll('.dropdown').forEach(drop => {
        if (!drop.contains(e.target)) drop.querySelector('.dropdown-content').style.display = 'none';
      });
    });
  </script>
</body>
</html>
